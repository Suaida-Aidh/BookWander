{% extends 'base.html' %} {% load static %} {% block content %} {% include 'include/navbar.html' %}

<!-- breadcrumb-section -->
<div class="breadcrumb-section single-product-bg">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 offset-lg-2 text-center">
                <div class="breadcrumb-text">
                    <p>See more Details</p>
                    <h1>Single Product</h1>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end breadcrumb section -->
<!-- single product -->
<div class="single-product mt-150 mb-150" style="margin-top: 8%;">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-6 text-center strawberry mt-4 mt-md-0 mt-lg-0 ">
                <div class="card shadow product-card" style="width:400px; height:500px;">
                    <div class="card-body d-flex align-items-center justify-content-center product-image-container"
                        style="width: 100%; height: 90%;">
                        <img src="{{ single_product.images.url }}" class="img-fluid rounded" alt="Product Image"
                            style="max-width: 100%; max-height: 100%;">

                    </div>
                </div>
            </div>

            <div class="col-md-8 mt-5 mt-md-0 mt-lg-0">
                <div class="single-product-content">
                    <h3>{{ single_product.product_name }}</h3>
                    <p class="single-product-pricing"><span>Price</span> ${{ single_product.price }}</p>
                    <div>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dicta sint dignissimos, rem commodi
                            cum
                            voluptatem quae reprehenderit repudiandae ea tempora incidunt ipsa, quisquam animi
                            perferendis
                            eos eum modi! Tempora, earum.</p>
                    </div>
                    <p>{{ single_product.description }}</p>
                    {% if single_product.stock <= 0 %} <label class="badge bg-danger">Out of stock</label>

                        {% else %}
                        <label class="badge bg-success">In stock</label>
                        <!-- Add to cart button -->
                        <div class="single-product-form">
                            <form action="{% url 'add_cart' single_product.id %}" id="addToCartForm">
                                <a href="{% url 'add_cart' single_product.id %}" class="cart-btn"> Add to <i
                                        class="fas fa-shopping-cart"></i></a>
                            </form>
                            {% endif %}

                        </div>
                        <p><strong>Category: </strong>{{ single_product.category.category_name }}</p>
                        <div class="size-204 flex-w flex-m respon6-next d-flex justify-content-between ">
                            {% if user.is_authenticated %}
                            {% if wishlist %}
                            <!-- If the product is in the wishlist -->
                            <a href="{% url 'add_to_wishlist' single_product.id %}"
                                class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 delete-wish"
                                data-item="{{ single_product.id }}">
                                <i class="far fa-heart "></i> Added to Wishlist
                            </a>
                            {% else %}
                            <!-- If the product is not in the wishlist -->
                            <a href="{% url 'add_to_wishlist' single_product.id %}" id="addtowishlist"
                                class="wishlist-btn">
                                <i class="far fa-heart "></i> Add to Wishlist
                            </a>
                            {% endif %}
                            {% endif %}
                        </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<!-- end single product -->


<div class="product-detail">
    <h2>{{ single_product.name }}</h2>
    <!-- Other product details display -->
    {% if wishlist %}
    <form action="{% url 'delete_from_wishlist' product_id=single_product.id %}" method="post">
        {% csrf_token %}
        <button type="submit">Remove from Wishlist</button>
    </form>
    {% else %}
    <form id="add-to-wishlist-form" action="{% url 'add_to_wishlist' product_id=single_product.id %}" method="post">
        {% csrf_token %}
        <button id="add-to-wishlist-button" type="submit">Add to Wishlist</button>
    </form>
    {% endif %}
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var addToWishlistForm = document.getElementById('add-to-wishlist-form');
        var addToWishlistButton = document.getElementById('add-to-wishlist-button');

        addToWishlistForm.addEventListener('submit', function (event) {
            event.preventDefault();  // Prevent the form from submitting
            addToWishlistButton.disabled = true;  // Disable the button to prevent multiple clicks
            addToWishlistForm.submit();  // Submit the form
            addToWishlistButton.style.display = 'none';  // Hide the button after submission
        });
    });
</script>
{% endblock content %}