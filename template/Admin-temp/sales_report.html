{% extends 'admin_base.html' %} {% load static %} {% block content %}
{% include 'include/admin_navbar.html' %}

<!-- Side Navbar Column -->




<div style="margin-left:20%; margin-right:5%; margin-top:2%;">
    <br><br>
    <h2 class="text-dark font-weight-bold" style="margin-left: 10px;">Admin Dashboard</h2>

    <section class="section dashboard">
        <div class="row">
            <!-- Left side columns -->
            <div class="col-lg-12">
                <div class="row">
                    <!-- Recent Sales -->
                    <div class="col-12">
                        <div class="card recent-sales overflow-auto">
                            <div class="card-body">


                                <div class="col-xxl-4 col-md-6">
                                    <div class="card info-card sales-card">

                                        <div class="card-body">
                                            <h5 class="card-title">Total Sales</h5>

                                            <div class="d-flex align-items-center">
                                                <div
                                                    class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                                                    <i class="bi bi-cart"></i>
                                                </div>
                                                <div class="ps-3">
                                                    <h6>{{sales}}</h6>
                                                    <span class="text-primary small pt-1 fw-bold">Products</span>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div><!-- End Sales Card -->


                                <form action="{% url 'generate_sales_report' %}" method="get">
                                    <label for="start_date">Start Date:</label>
                                    <input type="date" id="start_date" name="start_date">
                                    <label for="end_date">End Date:</label>
                                    <input type="date" id="end_date" name="end_date">

                                    <label for="report_type">Report Type:</label>
                                    <select id="report_type" name="report_type">
                                        <option value="monthly">Monthly</option>
                                        <option value="weekly">Weekly</option>
                                        <option value="daily">Daily</option>
                                        <option value="custom">Custom</option>
                                    </select>

                                    <button type="submit">Generate Report</button>
                                </form>

                                <div style="display: flex;  padding:5%; justify-content: space-evenly;">
                                    <h4>Total Sales: â‚¹ {{ total_sales }} </h4>
                                    <h4>Total Orders: {{sales_report.total_orders}} </h4>
                                    <p>Start Date: {{ start_date }}</p>
                                    <p>End Date: {{ end_date }}</p>
                                </div>
                                <h2 style="margin-left: 40%;">Sales by Status</h2>
                                <div>
                                    <ul
                                        style="display: flex;justify-content: space-evenly; font-weight: bold; margin-top: 5%; ">

                                        {% for status_count in status_counts %}
                                        <li>{{ status_count.status }}: {{ status_count.count }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>



                                <div class="table-responsive" id="sales_report">
                                    <table id="example" class="display nowrap mt-5 table" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>Order ID</th>
                                                <th>Tracking Number</th>
                                                <th>Total Price</th>
                                                <th>Status</th>
                                                <th>Created At</th>
                                            </tr>
                                        </thead>
                                        <tbody>


                                            <!-- Sample data -->
                                            <!-- <tr>
                                                <td> {{i.id}} </td>
                                                <td> {{i.tracking_no}} </td>
                                                <td>$ {{i.total_price}} </td>
                                                <td> {{i.od_status}} </td>
                                                <td> {{i.created_at}} </td>
                                            </tr> -->
                                            {% for order in orders %}
                                            <tr>
                                                <td>{{ order.id }}</td>
                                                <td>{{ order.tracking_no }}</td>
                                                <td>{{ order.total_price }}</td>
                                                <td>{{ order.od_status }}</td>
                                                <td>{{ order.created_at }}</td>

                                                <!-- Add more columns as needed -->
                                            </tr>
                                            {% endfor %}

                                        </tbody>
                                    </table>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<script>
    setTimeout(function () {
        $('#message').fadeOut('slow');
    }, 2000);

    $(document).ready(function () {
        $('#example').DataTable({
            dom: 'Bfrtip',
            buttons: [
                'copy', 'csv', 'excel', 'pdf', 'print'
            ]
        });
    });
</script>
<script>
    document.getElementById('report_type').addEventListener('change', function () {
        var customDates = document.getElementById('custom_dates');
        if (this.value === 'custom') {
            customDates.style.display = 'block';
        } else {
            customDates.style.display = 'none';
        }
    });
</script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.print.min.js"></script>

<!-- Include jQuery first -->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>

<!-- Include DataTables and other scripts -->
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>

<!-- 
<form action="{% url 'generate_sales_report' %}" method="get">
    <label for="start_date">Start Date:</label>
    <input type="date" id="start_date" name="start_date">
    <label for="end_date">End Date:</label>
    <input type="date" id="end_date" name="end_date">

    <label for="report_type">Report Type:</label>
    <select id="report_type" name="report_type">
        <option value="monthly">Monthly</option>
        <option value="weekly">Weekly</option>
        <option value="daily">Daily</option>
    </select>

    <button type="submit">Generate Report</button>
</form>




<body>
    <h1>Sales Report</h1>
    <p>Start Date: {{ start_date }}</p>
    <p>End Date: {{ end_date }}</p>
    <p>Total Sales: {{ total_sales }}</p>

    <h2>Status Counts</h2>
    <ul>
        {% for status_count in status_counts %}
        <li>{{ status_count.status }}: {{ status_count.count }}</li>
        {% endfor %}
    </ul>

    <h2>Payment Mode Counts</h2>
    <ul>
        {% for payment_mode_count in payment_mode_counts %}
        <li>{{ payment_mode_count.payment_mode }}: {{ payment_mode_count.count }}</li>
        {% endfor %}
    </ul>
    <!-- Add more data display as needed -->


    {% for order in orders %}
    <tr>
        <td>{{ order.id }}</td>
        <td>{{ order.total_price }}</td>
        <!-- Add more columns as needed -->
    </tr>
    {% endfor %}
</body> -->




{% endblock %}