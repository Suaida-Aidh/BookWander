{% extends 'admin_base.html' %} {% load static %} {% block content %}



<body class="app">

    {% include 'include/admin_navbar.html' %}
    <div class="app-wrapper">

        <div class="app-content pt-3 p-md-3 p-lg-4">
            <div class="container-xl">

                <h1 class="app-page-title">Admin Dashboard</h1>

                <div class="app-card alert alert-dismissible shadow-sm mb-4 border-left-decoration" role="alert">
                    <div class="inner">
                        <div class="app-card-body p-3 p-lg-4">
                            <h3 class="mb-3">Welcome, Bookwander!</h3>
                            <div class="row gx-5 gy-3">
                                <div class="col-12 col-lg-9">

                                    <div>Portal is a free Bootstrap 5 admin dashboard template. The design is simple,
                                        clean and modular so it's a great base for building any modern web app.</div>
                                </div><!--//col-->
                                
                            </div><!--//row-->
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div><!--//app-card-body-->

                    </div><!--//inner-->
                </div><!--//app-card-->

                <div class="row g-4 mb-4">
                    <!-- <div class="col-6 col-lg-3">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">TOTAL U</h4>
                                <div class="stats-meta text-success">
                                </div> -->
                    <!-- </div>//app-card-body -->
                    <!-- <a class="app-card-link-mask" href="#"></a> -->
                    <!-- </div>//app-card -->
                    <!-- </div>//col -->


                    <div class="col-6 col-lg-3">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Delivered</h4>
                                <div class="stats-figure">{{ status_delivery }}</div>
                                <div class="stats-meta text-success">
                                </div>
                            </div><!--//app-card-body-->
                            <a class="app-card-link-mask" href="#"></a>
                        </div><!--//app-card-->
                    </div><!--//col-->


                    <div class="col-6 col-lg-3">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Cancel</h4>
                                <div class="stats-figure">{{ status_cancel }}</div>
                                <div class="stats-meta text-success">
                                </div>
                            </div><!--//app-card-body-->
                            <a class="app-card-link-mask" href=""></a>
                        </div><!--//app-card-->
                    </div><!--//col-->


                    <div class="col-6 col-lg-3">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Return</h4>
                                <div class="stats-figure">{{ status_return }}</div>
                                <div class="stats-meta text-success">
                                </div>
                            </div><!--//app-card-body-->
                            <a class="app-card-link-mask" href="#"></a>
                        </div><!--//app-card-->
                    </div><!--//col-->




                    <div class="col-6 col-lg-3">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">TOTAL SALE</h4>
                                <div class="stats-figure">${{total_sale}}</div>
                                <h4>Total Sales: â‚¹ {{sales_report.total_sales}} </h4>

                                <div class="stats-meta text-success">

                                </div>
                            </div><!--//app-card-body-->
                            <a class="app-card-link-mask" href="#"></a>
                        </div><!--//app-card-->
                    </div><!--//col-->



                    <div class="col-6 col-lg-3">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1"> TOTAL EARNINGS</h4>
                                <div class="stats-figure">${{total_earning}}</div>
                                <div class="stats-meta text-success">

                                </div>
                            </div><!--//app-card-body-->
                            <a class="app-card-link-mask" href="#"></a>
                        </div><!--//app-card-->
                    </div><!--//col-->
                    <div class="col-6 col-lg-3">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Total Order</h4>
                                <div class="stats-figure">23</div>
                                <div class="stats-meta">
                                    Open</div>
                            </div><!--//app-card-body-->
                            <a class="app-card-link-mask" href="#"></a>
                        </div><!--//app-card-->
                    </div><!--//col-->
                    <div class="col-6 col-lg-3">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Invoices</h4>
                                <div class="stats-figure">6</div>
                                <div class="stats-meta">New</div>
                            </div><!--//app-card-body-->
                            <a class="app-card-link-mask" href="#"></a>
                        </div><!--//app-card-->
                    </div><!--//col-->
                </div><!--//row-->


                <div class="row">
                    <div class="col-lg-12 d-flex align-items-stretch my-4">
                        <div class="card w-100">
                            <div class="card-body p-4">
                                <h5 class="card-title fw-semibold mb-4">Recent Transactions</h5>
                                <div class="table-responsive">
                                    <table class="table text-nowrap mb-0 align-middle">
                                        <thead class="text-dark fs-4">
                                            <tr>
                                                <th class="border-bottom-0">
                                                    <h6 class="fw-semibold mb-0">Order Id</h6>
                                                </th>
                                                <th class="border-bottom-0">
                                                    <h6 class="fw-semibold mb-0">Name</h6>
                                                </th>
                                                <th class="border-bottom-0">
                                                    <h6 class="fw-semibold mb-0">Total Pirce</h6>
                                                </th>
                                                <th class="border-bottom-0">
                                                    <h6 class="fw-semibold mb-0">status</h6>
                                                </th>
                                                <th class="border-bottom-0">
                                                    <h6 class="fw-semibold mb-0">Tracking Number</h6>
                                                </th>
                                                <th class="border-bottom-0">
                                                    <h6 class="fw-semibold mb-0">Payment mode</h6>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for i in orders %}
                                            <tr>
                                                <td class="border-bottom-0">
                                                    <h6 class="fw-semibold mb-0">{{i.id}}</h6>
                                                </td>
                                                <td class="border-bottom-0">
                                                    <h6 class="fw-semibold mb-1">{{i.user.first_name}}</h6>
                                                    <span class="fw-normal"></span>
                                                </td>
                                                <td class="border-bottom-0">
                                                    <p class="mb-0 fw-normal">{{i.total_price}}</p>
                                                </td>
                                                <td class="border-bottom-0">
                                                    <div class="d-flex align-items-center gap-2">
                                                        <span class="">{{i.status}}</span>
                                                    </div>
                                                </td>
                                                <td class="border-bottom-0">
                                                    <h6 class="fw-semibold mb-0 fs-4">{{i.tracking_no}}</h6>
                                                </td>
                                                <td class="border-bottom-0">
                                                    <h6 class="fw-semibold mb-0 fs-4">{{i.payment_mode}}</h6>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="row g-4 mb-4">
                    <div class="col-12 col-lg-6">
                        <div class="app-card app-card-chart h-100 shadow-sm">
                            <div class="app-card-header p-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <h4 class="app-card-title">Line Chart Example</h4>
                                    </div><!--//col-->
                                    <div class="col-auto">
                                        <div class="card-header-action">
                                            <a href="charts.html">More charts</a>
                                        </div><!--//card-header-actions-->
                                    </div><!--//col-->
                                </div><!--//row-->
                            </div><!--//app-card-header-->
                            <div class="app-card-body p-3 p-lg-4">
                                <div class="mb-3 d-flex">
                                    <select class="form-select form-select-sm ms-auto d-inline-flex w-auto">
                                        <option value="1" selected>This week</option>
                                        <option value="2">Today</option>
                                        <option value="3">This Month</option>
                                        <option value="3">This Year</option>
                                    </select>
                                </div>
                                <div class="chart-container">
                                    <canvas id="canvas-linechart"></canvas>
                                </div>
                            </div><!--//app-card-body-->
                        </div><!--//app-card-->
                    </div><!--//col-->

                    <div class="col-12 col-lg-6">
                        <div class="app-card app-card-chart h-100 shadow-sm">
                            <div class="app-card-header p-3">
                                <div class="row justify-content-between align-items-center">
                                    <div class="col-auto">
                                        <h4 class="app-card-title">Orders Count (Day by Day)</h4>
                                    </div><!--//col-->
                                    <div class="col-auto">
                                        <div class="card-header-action">
                                            <a href="orders.html">View all orders</a>
                                        </div><!--//card-header-actions-->
                                    </div><!--//col-->
                                </div><!--//row-->
                            </div><!--//app-card-header-->
                            <div class="app-card-body p-3 p-lg-4">
                                <div class="chart-container">
                                    <canvas id="orders-barchart"></canvas>
                                </div>
                            </div><!--//app-card-body-->
                        </div><!--//app-card-->
                    </div><!--//col-->


                </div><!--//row-->


            </div><!--//row-->

        </div><!--//container-fluid-->
    </div><!--//app-content-->



    <!-- Javascript -->
    <script src="{% static 'admin_account/plugins/popper.min.js' %}"></script>
    <script src="{% static 'admin_account/plugins/bootstrap/js/bootstrap.min.js' %}"></script>

    <!-- Charts JS -->
    <script src="{% static 'admin_account/plugins/chart.js/chart.min.js' %}"></script>
    <script src="{% static 'admin_account/js/index-charts.js' %}"></script>

    <!-- Page Specific JS -->
    <script src="{% static 'admin_account/js/app.js' %}"></script>





    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        var salesValues = {{ sales_values| safe }};
        var returnValues = {{ return_values| safe }};
        var categories = {{ categories| safe }};

        var lineChartData = {
            labels: categories,
            datasets: [{
                label: 'Sales',
                data: salesValues
            }]
        };

        var barChartData = {
            labels: categories,
            datasets: [{
                label: 'Returns',
                data: returnValues
            }]
        };

        window.onload = function () {
            var ctx1 = document.getElementById('canvas-linechart').getContext('2d');
            new Chart(ctx1, {
                type: 'line',
                data: lineChartData
            });

            var ctx2 = document.getElementById('canvas-barchart').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: barChartData
            });
        };
    </script>

    <script>
        var dates = {{ dates| safe }};
        var orderCounts = {{ order_counts| safe }};

        var barChartData = {
            labels: dates,
            datasets: [{
                label: 'Orders Count',
                data: orderCounts
            }]
        };

        window.onload = function () {
            var ctx = document.getElementById('orders-barchart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: barChartData
            });
        };
    </script>


</body>

</html>


{% endblock content %}